{"version":3,"sources":["scripts/index.ts"],"names":[],"mappings":";AAmEC,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IA7DG,YAAa,QACd,WAEO,IA0BA,EAAwB,WACtB,IAzBU,EAyBV,EAAS,SAAS,eAAe,sBACnC,aAAkB,mBA1BN,EA4BZ,mFA3BG,IAAI,QAAQ,SAAC,EAAS,GACvB,IAAA,EAAiB,SAAS,eAJjB,YAQR,KACH,EAAiB,SAAS,cAAc,WACzB,GAVJ,WAWX,EAAe,KAAO,yBACtB,SAAS,KAAK,YAAY,IAG3B,OAAuB,WAAkB,EAE1C,EAAe,IACb,GAAO,EAAI,SAAS,KAAO,IAAM,KAAO,yBAaxC,KAAK,SAAA,GACD,IAEO,IAAA,EAAA,EAAA,KAAA,GAGT,EAAO,KAAO,EAAU,KACxB,EAAO,MAAQ,EAAU,KACzB,MAAO,GACP,QAAQ,MAAM,MAIlB,QAAQ,MAAM,mDAIU,YAAxB,SAAS,WACX,SAAS,mBAAqB,WACA,gBAAxB,SAAS,YACX,KAIJ,IAzDH","file":"scripts.4a42aa72.map","sourceRoot":"../src","sourcesContent":["/**\n * Utility scripts to improve the experience if JS is enabled\n */\n\nimport { MeetupApi } from \"./meetupApi\";\n\nif (\"Promise\" in window) {\n  (function main() {\n    // https://github.com/meetup/api/issues/130#issuecomment-253679176\n    const JSONP_ID = \"js-jsonp\";\n    const CALLBACK_NAME = \"__callback\";\n    const jsonpGet = (url: string) => {\n      return new Promise((resolve, reject) => {\n        let jsonpScriptTag = document.getElementById(\n          JSONP_ID\n        ) as HTMLScriptElement;\n\n        if (!jsonpScriptTag) {\n          jsonpScriptTag = document.createElement(\"script\");\n          jsonpScriptTag.id = JSONP_ID;\n          jsonpScriptTag.type = \"application/javascript\";\n          document.body.appendChild(jsonpScriptTag);\n        }\n\n        (window as /* ðŸ¦„ */ any)[CALLBACK_NAME] = resolve;\n\n        jsonpScriptTag.src =\n          url + (url.includes(\"?\") ? \"&\" : \"?\") + `callback=${CALLBACK_NAME}`;\n      });\n    };\n\n    /**\n     * Replaces `Attend a meetup` link with link to latest meetup\n     * and adds title attribute.\n     */\n    const addLinkToLatestMeetup = () => {\n      const anchor = document.getElementById(\"js-attend-a-meetup\");\n      if (anchor instanceof HTMLAnchorElement) {\n        jsonpGet(\n          \"https://api.meetup.com/WrocTypeScript/events?&sign=true&photo-host=public&page=1\"\n        ).then(res => {\n          try {\n            const {\n              data: [nextEvent],\n            } = res as MeetupApi.EventsResponse;\n\n            anchor.href = nextEvent.link;\n            anchor.title = nextEvent.name;\n          } catch (err) {\n            console.error(err);\n          }\n        });\n      } else {\n        console.error(\"There is no anchor with id #js-attend-a-meetup\");\n      }\n    };\n\n    if (document.readyState === \"loading\") {\n      document.onreadystatechange = () => {\n        if (document.readyState === \"interactive\") {\n          addLinkToLatestMeetup();\n        }\n      };\n    } else {\n      addLinkToLatestMeetup();\n    }\n  })();\n}\n"]}